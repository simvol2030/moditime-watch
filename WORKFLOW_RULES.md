# Правила работы над проектом Moditimewatch

## Обязательные правила (ВСЕГДА следовать)

---

### 1. Аудит после каждой задачи

**После выполнения ЛЮБОЙ задачи:**
- Запустить SUBAGENT с чистым контекстом для аудита кода
- Проверить на баги, ошибки, несоответствия
- Если баги найдены → исправить → повторить аудит
- Количество циклов: **2-3** (в зависимости от сложности)

**Если задача не решается:**
- Запустить SUBAGENT для **глубокого ресерча**
- Найти причину проблемы
- Исправить на основе найденного

---

### 2. Проверка фронтенда в браузере (ОБЯЗАТЕЛЬНО)

**Для ВСЕХ задач, связанных с фронтендом:**

1. Запустить dev сервер (`npm run dev`)
2. Открыть в браузере через MCP Playwright
3. Проверить функциональность:
   - Компонент рендерится
   - Интерактивность работает
   - Данные отображаются корректно
   - Нет ошибок в консоли
4. **Повторить проверку 2-3 раза**
5. Зафиксировать баги если есть
6. Исправить баги → повторить проверку

**НЕЛЬЗЯ отмечать задачу как выполненную без проверки в браузере!**

---

### 3. Аудит бэкенда

**Для задач бэкенда:**
- Запустить SUBAGENT с чистым контекстом
- Провести аудит API endpoints
- Проверить обработку ошибок
- Проверить корректность данных
- **2-3 цикла аудита**

---

### 4. Отметки в MASTER_ROADMAP.md

**Перед отметкой задачи как выполненной:**

| Тип задачи | Требования перед отметкой |
|------------|---------------------------|
| Frontend | Проверено в браузере 2-3 раза, багов нет |
| Backend | Аудит субагентом 2-3 цикла, багов нет |
| Full-stack | И браузер, и аудит |

**Никогда не отмечать без проверки!**

---

## Чеклист перед закрытием задачи

- [ ] Код написан
- [ ] Аудит субагентом проведен (2-3 цикла)
- [ ] Баги исправлены
- [ ] (Frontend) Проверено в браузере через Playwright
- [ ] (Frontend) Нет ошибок в консоли
- [ ] (Frontend) Интерактивность работает
- [ ] Только после этого → отметка в MASTER_ROADMAP.md

---

## Инструменты

- **Браузер:** `mcp__playwright__*` (navigate, snapshot, click, console_messages)
- **Dev сервер:** `npm run dev` в `/mnt/c/dev/watch/project-box-v2/frontend-sveltekit`
- **URL:** http://localhost:5173/
- **Субагенты:** Task tool с соответствующим subagent_type

---

*Создано: 24 ноября 2024*
*Эти правила ОБЯЗАТЕЛЬНЫ для всех задач проекта*
